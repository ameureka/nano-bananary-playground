好的，这是对您提供的最后一个文档“致谢”的完整 Markdown 格式转换。所有内容，包括标题、文本、代码块、结构，以及对所有图片的识别和描述，都已包含在内。至此，您提供的所有文档都已转换完毕。

***

### 文件 29：致谢 (Credits)

<+> MkSaaS 文档
Π
Q 搜索文档
*   **主页**
*   **介绍**
*   <> 代码库
*   **视频教程**
*   **入门**
*   <> 环境设置
*   **配置**
*   **部署**
*   **集成**
    *   数据库
    *   验证
    *   电子邮件
    *   通讯
    *   贮存
    *   支付
    *   **致谢**
    *   ① 计划任务
    *   人工智能
    *   分析
    *   通知
    *   ○ 验证码
    *   聊天框
    *   关联公司
*   **定制**
    *   目元数据
    *   T字体
    *   主题
    *   图片
    *   国际化
    *   博客
    *   文档
*   **成分**
    *   ● 自定义页面
    *   登陆页面
    *   用户管理
*   **代码库**
    *   IDE 设置
    *   品项目结构
    *   A格式化和 Linting
    *   更新代码库

---

### 致谢

了解如何在应用程序中设置和使用积分系统。

MkSaaS 提供灵活、模块化的积分系统，用于奖励用户、启用按次付费功能以及支持各种业务模式。本指南介绍如何在您的应用程序中启用、配置和使用积分系统。

#### 设置

要开始使用积分系统，请按照以下步骤配置必要的环境变量：

1.  **在配置中启用积分**
    *   打开 `src/config/website.tsx` 并找到 `credits` 部分。
    *   设置 `enableCredits: true` 以启用信用系统。
    *   设置 `enablePackagesForFreePlan`，默认只有付费用户才能购买额外的积分包，如果设置为 `true`，免费用户也可以购买积分包。
    *   设置 `registerGiftCredits` 来配置注册时是否赠送积分、赠送的积分数量以及有效期。

    `src/config/website.tsx`
    ```tsx
    export const websiteConfig = {
      // ...other config
      credits: {
        enableCredits: true, // Enable credits system
        enablePackagesForFreePlan: false, // disable free users to purchase credits
        registerGiftCredits: {
          enable: true, // Give credits on registration
          amount: 10, // Number of credits to gift
          expireDays: 30, // Optional: days before credits expire
        },
        packages: {
          basic: {
            id: 'basic',
            amount: 100,
            price: {
              priceId: process.env.NEXT_PUBLIC_STRIPE_PRICE_CREDITS_BASIC!,
              amount: 990,
              currency: 'USD',
            },
            popular: false,
          },
          // ...other packages
        },
      },
      // ...other config
    }
    ```
2.  **在价格计划中配置积分**
    *   打开文件 `src/config/website.tsx` 并找到 `price.plans` 部分。
    *   将 `credits` 字段设置为 `true` 以在此价格计划中启用信用。
    *   将 `amount` 字段设置为 100 以设置此价格计划中的信用额度。

    `src/config/website.tsx`
    ```tsx
    export const websiteConfig = {
      // ...other config
      price: {
        plans: {
          free: {
            id: 'free',
            // ...other config
            isFree: true,
            isLifetime: false,
            credits: {
              enable: true,
              amount: 50,
              expireDays: 30,
            },
          },
          // ...other plans
        },
      },
      // ...other config
    }
    ```
3.  **配置信用套餐**
    在 `credits.packages` 下定义积分包，默认有 4 个积分包。
    *   每个包都包含一个 `id`、`credits amount`、`price` (Stripe priceId，请参阅下面的 Set Stripe Price IDs) 以及可选字段，如 `popular`、`expireDays`。
    *   货币为美元，目前仅支持美元。

    `src/config/website.tsx`
    ```tsx
    packages: {
      basic: {
        id: 'basic',
        amount: 100,
        price: {
          priceId: process.env.NEXT_PUBLIC_STRIPE_PRICE_CREDITS_BASIC!,
          amount: 990,
          currency: 'USD',
        },
        popular: false,
        // ...
      },
    }
    ```
4.  **设置 Stripe 价格 ID**
    Stripe 价格 ID 用于将信用包链接到 Stripe 产品和价格。
    *   转到 Stripe 仪表板，创建新产品，并为每个信用包设置价格。
    *   将每个信用包的 Stripe 价格 ID 添加到 `.env` 文件：

    `.env`
    ```
    NEXT_PUBLIC_STRIPE_PRICE_CREDITS_BASIC=price_...
    NEXT_PUBLIC_STRIPE_PRICE_CREDITS_STANDARD=price_...
    NEXT_PUBLIC_STRIPE_PRICE_CREDITS_PREMIUM=price_...
    NEXT_PUBLIC_STRIPE_PRICE_CREDITS_ENTERPRISE=price_...
    ```
    ![图片描述：Stripe 产品目录截图，显示了一个名为“CREDITS”的有效产品，并为其设置了四个不同的价格点，例如 $9.90 USD, $14.90 USD 等。](https://storage.googleapis.com/agent-tools-public-mde/1723154562590-1.png)
5.  **设置信用包的翻译**
    *   在 `src/config/credits-config.tsx` 中定义翻译后的信用包名称和描述。
    *   对应的翻译文件在 `src/messages/en.json`、`src/messages/zh.json` 等。

    `src/config/credits-config.tsx`
    ```tsx
    export function getCreditPackages(): Record<string, CreditPackage> {
      const t = useTranslations('CreditPackages');
      const creditConfig = websiteConfig.credits;
      const packages: Record<string, CreditPackage> = {};

      // Add translated content to each package
      if (creditConfig.packages.basic) {
        packages.basic = {
          ...creditConfig.packages.basic,
          name: t('basic.name'),
          description: t('basic.description'),
        };
      }
      
      // Add other packages here...
      return packages;
    }
    ```6.  **设置 Cron 作业**
    请参阅 [Cron Jobs 文档](../integrations/cron-jobs)来设置用于信用分配和信用到期的 cron 作业。

> ▲ 如果您正在设置环境，现在可以返回**环境设置指南**并继续。本指南的其余部分可以稍后阅读。
>
> **<> 环境设置**
> 设置环境变量

#### 学分体系结构

学分系统是模块化的，由以下部分组成：

*   **源码 (src)**
    *   `学分 (credits)`
        *   `积分.ts`
        *   `类型.ts`
        *   `客户端.ts`
        *   `服务器.ts`
        *   `行动 (actions)`
        *   `配置 (config)`
        *   `商店 (store)`
        *   `应用程序 (app)`

#### 核心功能

*   **购买积分**：如果积分不够，用户可以购买积分包。
*   **注册时赠送积分**：可选择向新用户授予积分。
*   **信用到期日**：设置每个包裹或礼物的信用到期日。
*   **跟踪信用余额**：安全地查询当前用户信用。
*   **信用交易**：查看详细的交易历史记录（购买、使用、到期等）。
*   **自定义包裹**：定义任意数量、不同数量、不同价格和不同属性的包裹。
*   **国际化**：支持翻译包名称和描述。
*   **安全服务器操作**：所有信用操作都受到保护和验证。
*   **状态存储**：在应用程序中全局管理信用状态，并通过钩子在 React 组件中使用它。

#### 最佳实践

1.  **仅在需要时启用**：仅当您的业务模型需要信用时才设置 `enableCredits: true`。
2.  **验证所有操作**：对所有信用操作使用提供的服务器操作以确保安全性和验证。
3.  **处理到期**：如果您希望积分到期，请为包裹或礼物设置 `expireDays`。

#### 测试

您可以访问 `http://localhost:3000/test` 页面测试积分系统，里面有一个消耗 100 积分的按钮，消耗后会显示积分余额。

#### 视频教程

<br>
![图片描述：一个视频教程的缩略图，标题为“MkSaaS 模板 积分制模块功能和配置”，副标题为“从开启和配置积分模块，到积分功能的演示”。画面中有一叠金币的图标。](https://storage.googleapis.com/agent-tools-public-mde/1723154562590-2.png)> [在 YouTube 上观看：MkSaaS 模板的积分模块配置教程](https://www.youtube.com/watch?v=placeholder)
<br>

#### 后续步骤

现在您已经了解了如何在 MkSaaS 中使用积分，请探索以下相关集成：

| | |
| :--- | :--- |
| **支付**<br>配置付款和订阅 | **验证**<br>配置用户身份验证 |
| **分析**<br>配置分析 | **电子邮件设置**<br>配置电子邮件服务 |

< **支付**
了解如何设置和使用 Stripe 处理付款和订阅

**计划任务 >**
了解如何在 MkSaaS 中设置和使用 Cron Jobs