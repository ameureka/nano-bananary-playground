好的，这是对您提供的最后一个文档“国际化”的完整 Markdown 格式转换。所有内容，包括标题、文本、代码块、结构，以及对所有图片的识别和描述，都已包含在内。至此，您提供的所有文档都已转换完毕。

***

### 文件 25：国际化 (Internationalization)

<+> MkSaaS 文档
Π
Q 搜索文档
*   **主页**
*   **介绍**
*   <> 代码库
*   **视频教程**
*   **入门**
*   <> 环境设置
*   **配置**
*   **部署**
*   **集成**
    *   数据库
    *   验证
    *   电子邮件
    *   通讯
    *   贮存
    *   支付
    *   致谢
    *   ① 计划任务
    *   人工智能
    *   分析
    *   通知
    *   ○ 验证码
    *   聊天框
    *   关联公司
*   **定制**
    *   目元数据
    *   T字体
    *   主题
    *   图片
    *   **国际化**
    *   博客
    *   文档
*   **成分**
    *   ● 自定义页面
    *   登陆页面
    *   用户管理
*   **代码库**
    *   IDE 设置
    *   品项目结构
    *   A格式化和 Linting
    *   更新代码库

---

### 国际化

了解如何设置和使用国际化。

MkSaaS 模板默认支持国际化，允许您创建本地化的 UI 组件、电子邮件模板等，为全球用户提供更好的体验。

#### 设置

以下是在 `website.tsx` 配置文件中配置国际化的方法：

| 财产 (Property) | 类型 (Type) | 描述 (Description) |
| :--- | :--- | :--- |
| `defaultLocale` | `string` | 默认语言区域设置（例如 “en”） |
| `locales` | `Record<string, { flag?: string; name: string; hreflang?: string }>` | 带有国旗表情符号和显示名称的可用语言 |

`src/config/website.tsx`
```tsx
export const websiteConfig = {
  // ...other config
  i18n: {
    defaultLocale: 'en',
    locales: {
      en: {
        flag: '🇺🇸',
        name: 'English',
        hreflang: 'en',
      },
      zh: {
        flag: '🇨🇳',
        name: '中文',
        hreflang: 'zh-CN',
      },
    },
  },
  // ...other config
};
```
> ▲ 如果您正在设置环境，现在可以返回**环境设置指南**并继续。本指南的其余部分可以稍后阅读。
>
> **<> 环境设置**
> 设置环境变量

#### 国际化体系结构

MkSaaS 中的国际化系统设计有以下组件：

*   **源码 (src)**
    *   `国际化 (i18n)`
    *   `消息 (messages)`
        *   `消息.ts`
        *   `导航.ts`
        *   `请求.ts`
        *   `路由.ts`
        *   `en.json`
        *   `zh.json`

#### 核心功能

*   通过 **Next-intl** 集成提供多语言支持。
*   带有前缀语言环境的国际化路由。
*   本地化的 UI 组件，提供一致的用户体验。
*   用于沟通的本地化电子邮件模板。
*   具有正确区域设置处理的 URL 生成。
*   根据用户偏好自动检测语言。
*   2 个内置区域设置切换器组件：`LocaleSelector` 和 `LocaleSwitcher`。

#### 翻译文件

MkSaaS 模板使用 JSON 文件进行翻译，这些文件位于 `messages` 目录中。每种语言都有自己的文件，遵循命名约定 `[locale].json`。

这些文件的结构是分层的，允许您按功能或组件组织翻译：

`消息/en.json`
```json
{
  "Metadata": {
    "name": "MkSaaS",
    "title": "MkSaaS - The Best AI SaaS Boilerplate",
    "description": "MkSaaS is the best AI SaaS boilerplate. Make AI SaaS in days, simply and effortlessly"
  },
  "Common": {
    "login": "Log in",
    "logout": "Log out",
    "signUp": "Sign up",
    "language": "Switch language"
  },
  "Mail": {
    "verifyEmail": {
      "title": "Hi, {name}.",
      "body": "Please click the link below to verify your email address.",
      "confirmEmail": "Confirm email",
      "subject": "Verify your email"
    }
  }
}
```

#### 用法

##### 在 React 组件中使用翻译

MkSaaS 通过 `useTranslations` 钩子提供了一种在 React 组件中使用翻译的简单方法：
```tsx
import { useTranslations } from 'next-intl';

export function MyComponent() {
  const t = useTranslations();
  
  return (
    <div>
      <h1>{t('Common.login')}</h1>
      <p>{t('Common.signUp')}</p>
    </div>
  );
}
```
对于带有参数的翻译：
`<p>{t('Mail.verifyEmail.title', { name: 'John' })}</p>`

##### 在服务器组件中使用翻译

对于服务器组件，使用 `getTranslations` 函数：
```tsx
import { getTranslations } from 'next-intl/server';

export async function MyServerComponent() {
  const t = await getTranslations();
  
  return (
    <div>
      <h1>{t('Common.login')}</h1>
    </div>
  );
}
```

##### 本地化链接和导航

要创建符合当前语言环境的链接，请使用 `LocaleLink` 组件：
```tsx
import { LocaleLink } from '@/i18n/navigation';

<LocaleLink href="/about">About Us</LocaleLink>
```
对于程序化导航：
```tsx
import { useLocaleRouter } from '@/i18n/navigation';

const router = useLocaleRouter();
router.push('/dashboard');
```

##### 本地化电子邮件模板

MkSaaS 模板包括使用相同翻译系统发送本地化电子邮件的支持：

`src/mail/templates/verify-email.tsx`
```tsx
import type { BaseEmailProps } from '@/mail/types';
import { createTranslator } from 'use-intl/core';

interface VerifyEmailProps extends BaseEmailProps {
  url: string;
  name: string;
}

export function VerifyEmail({
  url,
  name,
  locale,
  messages,
}: VerifyEmailProps) {
  const t = createTranslator({
    locale,
    messages,
    namespace: 'Mail.verifyEmail',
  });

  return (
    <EmailLayout locale={locale} messages={messages}>
      <Text>{t('title', { name })}</Text>
      <Text>{t('body')}</Text>
      <EmailButton href={url}>{t('confirmEmail')}</EmailButton>
    </EmailLayout>
  );
}
```
要发送本地化电子邮件：
```ts
await sendEmail({
  to: 'user@example.com',
  template: 'verifyEmail',
  context: {
    name: 'John Doe',
    url: 'https://example.com/verify?token=abc123',
  },
  locale: 'zh', // Specify the locale for this email
});
```

##### 区域设置切换器组件

MkSaaS 提供两种不同的语言环境切换组件，让您可以灵活地为用户提供语言选择：

*   `LocaleSelector` (`src/components/layout/locale-selector.tsx`)
*   `区域切换器` (`src/components/layout/locale-switcher.tsx`)

这两个组件都使用 UI 库中的 `Select` 组件提供了下拉选择界面。您可以根据需要使用任意一个组件。

#### 定制

##### 添加新语言

1.  **创建一个新的翻译文件**：
    在 `messages` 目录中创建一个新的 JSON 文件，并使用您的语言环境名称（例如，`fr.json`）。
    您可以从 `en.json` 复制结构并翻译所有值：

    `消息/fr.json`
    ```json
    {
      "Metadata": {
        "name": "MkSaaS",
        "title": "MkSaaS - Le meilleur modèle SaaS AI",
        "description": "MkSaaS est le meilleur modèle SaaS AI. Créez un SaaS AI en quelques jours, simplement et sans effort"
      },
      // ... rest of translations
    }
    ```
2.  **更新网站配置**：
    将新的语言环境添加到您的 `website.tsx` 配置中：

    `src/config/website.tsx`
    ```tsx
    i18n: {
      defaultLocale: 'en',
      locales: {
        en: { /* ... */ },
        zh: { /* ... */ },
        fr: {
          flag: '🇫🇷',
          name: 'Français',
          hreflang: 'fr',
        },
      },
    },
    ```
3.  **处理不完整的翻译**：
    系统会自动将翻译与默认语言合并，因此任何缺失的翻译都会恢复为默认语言（通常是英语）。

##### 仅支持一种语言

如果您只想在应用程序中支持一种语言：

1.  在配置文件中仅保留您想要支持的语言：

    `src/config/website.tsx`
    ```tsx
    i18n: {
      defaultLocale: 'en',
      locales: {
        en: {
          flag: '🇺🇸',
          name: 'English',
          hreflang: 'en',
        },
        // Remove or comment out other languages
      },
    },
    ```
2.  仅保留 `messages` 目录中相应的语言文件（例如 `en.json`）。
3.  `LocaleSelector` 和 `LocaleSwitcher` 组件都会自动检测是否仅配置了一种语言，并且不会在 UI 中渲染。这可以确保您的 UI 保持简洁，避免不必要的语言选择控件。

##### 特殊区域注意事项

MkSaaS 使用 Fumadocs 实现文档搜索功能，并提供适当的国际化支持。对于有特殊要求的语言（例如阿拉伯语），您可能需要配置其他设置：

`src/app/api/搜索/route.ts`
```ts
const searchAPI = createI18nSearchAPI('advanced', {
  localeMap: {
    // Chinese configuration with Mandarin tokenizer
    zh: {
      components: {
        tokenizer: createTokenizer(),
      },
      search: {
        threshold: 0,
        tolerance: 0,
      },
    },
    // Use default tokenizers for other languages
    en: 'english',
    // Add more language-specific configurations as needed
  },
});
```
对于中文等语言，搜索系统会使用普通话分词器来正确索引和搜索内容。这需要进行如上所示的特殊配置，并调整阈值和容差设置以获得最佳搜索结果。

> ● 搜索配置遵循 Fumadocs [特殊语言](https://fumadocs.ui.log/docs/search/advanced#special-languages)和 [Fumadocs 国际化](https://fumadocs.ui.log/docs/i18n)文档的建议。

#### 开发工具

##### i18n-ally VSCode 扩展

为了在进行国际化工作时获得更流畅的开发体验，我们强烈建议为您的 IDE（Visual Studio Code、Cursor 等）安装 [i18n-ally](https://marketplace.visualstudio.com/items?itemName=lokalise.i18n-ally) 扩展。

> **<> 国际化**
> 了解有关 i18n-ally 设置的更多信息

这个强大的扩展为多语言应用程序开发提供了多种好处：

*   **内联翻译预览**：直接在代码中查看翻译。
*   **缺失翻译检测**：突出显示某些语言中缺少翻译的键。
*   **快速创建翻译**：使用键盘快捷键快速添加新翻译。
*   **翻译管理**：轻松排序、重命名和重构翻译键。
*   **多框架支持**：可与许多 i18n 框架配合使用，包括 `next-intl`。
*   **自动完成**：输入时建议翻译键。
*   **悬停信息**：将鼠标悬停在某个键上时查看所有语言的翻译。

该扩展与 MkSaaS 的国际化结构无缝集成，可以显著改善您管理跨多种语言翻译时的工作流程。

#### 最佳实践

1.  **使用基于命名空间的键**：使用命名空间组织翻译，使其更易于维护。
2.  **对动态内容使用参数**：对动态内容使用参数而不是字符串连接。
3.  **保持翻译简洁**：避免冗长的翻译，因为这可能会破坏您的 UI 布局。
4.  **考虑上下文**：在关键词中提供上下文，以帮助翻译人员了解文本的使用方式。
5.  **测试所有语言**：始终使用所有支持的语言测试您的应用程序，以确保获得良好的体验。

#### 常问问题

1.  **将默认语言更改为 `zh` 后，出现构建错误 `[Error: Failed to collect page data for /api/search] { type: 'Error' }`。**
    原因是 MkSaaS 模板默认语言是英文，所以 `content` 目录下的文件命名方式是英文为 `xx.mdx`，中文为 `xx.zh.mdx`。当默认语言改为中文，则需要修改 `content` 目录下文件的命名，将原来的 `xx.mdx` 重命名为 `xx.en.mdx`，原来的 `xx.zh.mdx` 需要重命名为 `xx.mdx`。

    您可以在终端中执行以下命令批量替换 `content` 目录中的 MDX 文件：
    ```bash
    find content -name "*.mdx" -type f | while read file; do
      if [[ "$file" == *.zh.mdx ]]; then
        # Change xx.zh.mdx to xx.mdx
        mv "$file" "${file%.zh.mdx}.mdx"
      else
        # Change xx.mdx to xx.en.mdx
        mv "$file" "${file%.mdx}.en.mdx"
      fi
    done
    ```

#### 相关文档

*   [Hreflang 标签](https://developers.google.com/search/docs/specialty/international/localized-versions)
*   [ISO 3166-1 alpha-2](https://www.iso.org/iso-3166-country-codes.html)

#### 视频教程

<br>
![图片描述：一个视频教程的缩略图，标题为“MkSaaS模板 网站自定义教程”，副标题为“从定制字体、主题到落地页的全流程实录”。画面中有一个工具箱，象征着网站的自定义和构建。](https://storage.googleapis.com/agent-tools-public-mde/1723149842708-3.png)
> [在 YouTube 上观看：MkSaaS 模板的网站自定义教程](https://www.youtube.com/watch?v=placeholder)
<br>

#### 后续步骤

现在您已经了解了如何在 MkSaaS 中进行国际化，您可能想要探索以下相关功能：

| | |
| :--- | :--- |
| **电子邮件**<br>配置电子邮件服务 | **环境设置**<br>配置环境变量 |
| **主题**<br>配置主题和外观设置 | **网站配置**<br>配置网站设置 |

< **图片**
了解如何自定义 MkSaaS 网站中的图像

**博客 >**
了解如何创建、管理和自定义具有多语言支持的博客文章