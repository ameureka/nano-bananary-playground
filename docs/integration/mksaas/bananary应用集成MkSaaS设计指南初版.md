# Nano Bananary é›†æˆ MkSaaS è®¾è®¡æŒ‡å—

> **æ–‡æ¡£ç›®æ ‡**: ä¸ºå°†çœŸå®åº”ç”¨ï¼ˆå¦‚ nano-bananaryï¼‰é›†æˆåˆ° MkSaaS SaaS æ¨¡æ¿æ¡†æ¶æä¾›å®Œæ•´çš„æ¶æ„è®¾è®¡æŒ‡å—  
> **ç”Ÿæˆæ—¥æœŸ**: 2025-10-17  
> **é€‚ç”¨åœºæ™¯**: AI åº”ç”¨ã€å›¾åƒå¤„ç†åº”ç”¨ã€SaaS äº§å“åŒ–

---

## ğŸ“‹ ç›®å½•

1. [æ ¸å¿ƒé—®é¢˜åˆ†æ](#1-æ ¸å¿ƒé—®é¢˜åˆ†æ)
2. [æ¶æ„è®¾è®¡åŸåˆ™](#2-æ¶æ„è®¾è®¡åŸåˆ™)
3. [åº”ç”¨èƒ½åŠ›è¦æ±‚](#3-åº”ç”¨èƒ½åŠ›è¦æ±‚)
4. [MkSaaS æ¡†æ¶èƒ½åŠ›æ˜ å°„](#4-mksaas-æ¡†æ¶èƒ½åŠ›æ˜ å°„)
5. [é›†æˆæ¶æ„è®¾è®¡](#5-é›†æˆæ¶æ„è®¾è®¡)
6. [æ•°æ®æ¨¡å‹è®¾è®¡](#6-æ•°æ®æ¨¡å‹è®¾è®¡)
7. [API è®¾è®¡è§„èŒƒ](#7-api-è®¾è®¡è§„èŒƒ)
8. [å‰ç«¯é›†æˆç­–ç•¥](#8-å‰ç«¯é›†æˆç­–ç•¥)
9. [ç”¨æˆ·ä½“éªŒè®¾è®¡](#9-ç”¨æˆ·ä½“éªŒè®¾è®¡)
10. [å®‰å…¨ä¸æ€§èƒ½](#10-å®‰å…¨ä¸æ€§èƒ½)
11. [å®æ–½è·¯çº¿å›¾](#11-å®æ–½è·¯çº¿å›¾)
12. [æœ€ä½³å®è·µæ¸…å•](#12-æœ€ä½³å®è·µæ¸…å•)

---

## 1. æ ¸å¿ƒé—®é¢˜åˆ†æ

### 1.1 é—®é¢˜æœ¬è´¨

**ä½ çš„æ ¸å¿ƒç–‘é—®**ï¼š
> MkSaaS æ˜¯ä¸€ä¸ª SaaS æ¨¡æ¿æ¡†æ¶ï¼Œæä¾›äº†å®Œæ•´çš„å•†ä¸šåŒ–åŸºç¡€è®¾æ–½ï¼ˆè®¤è¯ã€æ”¯ä»˜ã€ç”¨æˆ·ç®¡ç†ç­‰ï¼‰ï¼Œä½†**æ²¡æœ‰çœŸå®çš„ä¸šåŠ¡åº”ç”¨**ã€‚å¦‚ä½•å°†ä¸€ä¸ªçœŸå®çš„åº”ç”¨ï¼ˆå¦‚ nano-bananary å›¾åƒç¼–è¾‘å™¨ï¼‰é›†æˆè¿›å»ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªå®Œæ•´çš„å•†ä¸šåŒ– SaaS äº§å“ï¼Ÿ

**é—®é¢˜æ‹†è§£**ï¼š
1. **åº”ç”¨ä¾§**ï¼šnano-bananary éœ€è¦å…·å¤‡å“ªäº›èƒ½åŠ›æ‰èƒ½è¢«é›†æˆï¼Ÿ
2. **æ¡†æ¶ä¾§**ï¼šMkSaaS æä¾›äº†å“ªäº›èƒ½åŠ›ï¼Œå¦‚ä½•åˆ©ç”¨ï¼Ÿ
3. **é›†æˆä¾§**ï¼šä¸¤è€…å¦‚ä½•æ— ç¼å¯¹æ¥ï¼Œå½¢æˆç»Ÿä¸€çš„äº§å“ä½“éªŒï¼Ÿ

### 1.2 å½“å‰çŠ¶æ€åˆ†æ

**Nano Bananary ç°çŠ¶**ï¼š
```
âœ… åŠŸèƒ½å®Œæ•´ï¼š50+ å›¾åƒæ•ˆæœã€AI èŠå¤©ã€è§†é¢‘ç”Ÿæˆ
âœ… ç”¨æˆ·ä½“éªŒå¥½ï¼šMaterial Design 3ã€å›½é™…åŒ–ã€å“åº”å¼
âŒ æ— ç”¨æˆ·ç³»ç»Ÿï¼šä»»ä½•äººéƒ½å¯ä»¥æ— é™ä½¿ç”¨
âŒ æ— å•†ä¸šåŒ–ï¼šæ²¡æœ‰ä»˜è´¹ã€è®¢é˜…ã€é…é¢ç®¡ç†
âŒ API Key æš´éœ²ï¼šå‰ç«¯ç›´æ¥è°ƒç”¨ Gemini API
âŒ æ— æ•°æ®æŒä¹…åŒ–ï¼šåˆ·æ–°åèµ„äº§åº“æ¸…ç©º
âŒ æ— åç«¯æœåŠ¡ï¼šçº¯å‰ç«¯åº”ç”¨
```

**MkSaaS ç°çŠ¶**ï¼š
```
âœ… å®Œæ•´çš„ç”¨æˆ·ç³»ç»Ÿï¼šæ³¨å†Œã€ç™»å½•ã€OAuth
âœ… æ”¯ä»˜ç³»ç»Ÿï¼šStripe è®¢é˜…ã€ä¸€æ¬¡æ€§ä»˜æ¬¾
âœ… ç§¯åˆ†ç³»ç»Ÿï¼šè´­ä¹°ã€èµ é€ã€åˆ°æœŸç®¡ç†
âœ… åç«¯åŸºç¡€è®¾æ–½ï¼šNext.js API Routesã€æ•°æ®åº“
âœ… ç®¡ç†åå°ï¼šç”¨æˆ·ç®¡ç†ã€æƒé™æ§åˆ¶
âŒ æ— å…·ä½“ä¸šåŠ¡é€»è¾‘ï¼šåªæ˜¯æ¡†æ¶ï¼Œæ²¡æœ‰å®é™…åº”ç”¨
```



---

## 2. æ¶æ„è®¾è®¡åŸåˆ™

### 2.1 æ ¸å¿ƒè®¾è®¡åŸåˆ™

#### åŸåˆ™ 1ï¼šå…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MkSaaS æ¡†æ¶å±‚                              â”‚
â”‚  è´Ÿè´£ï¼šè®¤è¯ã€æˆæƒã€æ”¯ä»˜ã€ç”¨æˆ·ç®¡ç†ã€æ•°æ®æŒä¹…åŒ–                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•ï¸ æ¸…æ™°çš„æ¥å£
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡åº”ç”¨å±‚                                 â”‚
â”‚  è´Ÿè´£ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€AI è°ƒç”¨ã€å›¾åƒå¤„ç†ã€ç”¨æˆ·äº¤äº’                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®è·µè¦ç‚¹**ï¼š
- âœ… æ¡†æ¶ä¸åº”è¯¥çŸ¥é“å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚å›¾åƒæ•ˆæœåˆ—è¡¨ï¼‰
- âœ… åº”ç”¨ä¸åº”è¯¥ç›´æ¥å¤„ç†ç”¨æˆ·è®¤è¯ã€æ”¯ä»˜é€»è¾‘
- âœ… é€šè¿‡æ ‡å‡†åŒ–çš„æ¥å£å’Œæ•°æ®æ¨¡å‹è¿›è¡Œé€šä¿¡

#### åŸåˆ™ 2ï¼šæ¸è¿›å¼é›†æˆï¼ˆProgressive Integrationï¼‰

```
é˜¶æ®µ 1: åŸºç¡€é›†æˆ
  â””â”€ ç”¨æˆ·è®¤è¯ + ç®€å•çš„å›¾åƒç”ŸæˆåŠŸèƒ½

é˜¶æ®µ 2: å•†ä¸šåŒ–
  â””â”€ æ·»åŠ ç§¯åˆ†ç³»ç»Ÿ + é…é¢é™åˆ¶

é˜¶æ®µ 3: å®Œæ•´åŠŸèƒ½
  â””â”€ æ‰€æœ‰ 50+ æ•ˆæœ + èµ„äº§åº“ + èŠå¤©

é˜¶æ®µ 4: ä¼˜åŒ–å¢å¼º
  â””â”€ æ€§èƒ½ä¼˜åŒ– + é«˜çº§åŠŸèƒ½
```

#### åŸåˆ™ 3ï¼šæ•°æ®é©±åŠ¨é…ç½®ï¼ˆData-Driven Configurationï¼‰

```typescript
// âŒ é”™è¯¯ï¼šç¡¬ç¼–ç ä¸šåŠ¡é€»è¾‘
if (user.plan === 'free') {
  maxGenerations = 10;
}

// âœ… æ­£ç¡®ï¼šé…ç½®é©±åŠ¨
const planConfig = {
  free: { maxGenerations: 10, features: ['basic'] },
  pro: { maxGenerations: 100, features: ['basic', 'advanced'] },
  lifetime: { maxGenerations: -1, features: ['all'] }
};
```

### 2.2 æ¶æ„æ¨¡å¼é€‰æ‹©

#### æ¨èæ¨¡å¼ï¼šå¾®å‰ç«¯ + BFFï¼ˆBackend for Frontendï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æµè§ˆå™¨                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MkSaaS Shell  â”‚  â”‚  Nano Bananary â”‚  â”‚  å…¶ä»–åº”ç”¨æ¨¡å—   â”‚ â”‚
â”‚  â”‚  (å¯¼èˆª/å¸ƒå±€)    â”‚  â”‚  (ä¸šåŠ¡ç»„ä»¶)     â”‚  â”‚  (å¯æ‰©å±•)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•ï¸ API è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Next.js API Routes (BFF)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Auth API      â”‚  â”‚  Payment API   â”‚  â”‚  Image API     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å¤–éƒ¨æœåŠ¡                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Database      â”‚  â”‚  Stripe        â”‚  â”‚  Gemini AI     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜åŠ¿**ï¼š
- âœ… å‰ç«¯ç»„ä»¶å¯ä»¥ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•
- âœ… API Key å®‰å…¨å­˜å‚¨åœ¨åç«¯
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- âœ… æ˜“äºæ‰©å±•æ–°åŠŸèƒ½

---

## 3. åº”ç”¨èƒ½åŠ›è¦æ±‚

### 3.1 å¿…å¤‡èƒ½åŠ›æ¸…å•

ä¸ºäº†èƒ½å¤Ÿé›†æˆåˆ° MkSaaSï¼Œä½ çš„åº”ç”¨éœ€è¦å…·å¤‡ä»¥ä¸‹èƒ½åŠ›ï¼š

#### âœ… èƒ½åŠ› 1ï¼šæ¨¡å—åŒ–æ¶æ„

**è¦æ±‚**ï¼š
```typescript
// åº”ç”¨åº”è¯¥èƒ½å¤Ÿä½œä¸ºç‹¬ç«‹æ¨¡å—å¯¼å‡º
export const ImageEditorModule = {
  // æ ¸å¿ƒç»„ä»¶
  components: {
    Editor: ImageEditor,
    Gallery: AssetGallery,
    Chat: AIChatInterface
  },
  
  // ä¸šåŠ¡é€»è¾‘
  services: {
    imageService: ImageProcessingService,
    aiService: AIIntegrationService
  },
  
  // é…ç½®
  config: {
    effects: TRANSFORMATION_EFFECTS,
    limits: USAGE_LIMITS
  }
};
```

**Nano Bananary ç°çŠ¶**ï¼š
- âŒ å½“å‰æ˜¯å•ä½“åº”ç”¨ï¼ˆApp.tsx 1300+ è¡Œï¼‰
- âœ… ç»„ä»¶å·²ç»åˆ†ç¦»ï¼ˆcomponents/ ç›®å½•ï¼‰
- âš ï¸ éœ€è¦é‡æ„ï¼šå°†ä¸šåŠ¡é€»è¾‘æå–ä¸ºç‹¬ç«‹æœåŠ¡

#### âœ… èƒ½åŠ› 2ï¼šç”¨æˆ·ä¸Šä¸‹æ–‡æ„ŸçŸ¥

**è¦æ±‚**ï¼š
```typescript
// åº”ç”¨éœ€è¦èƒ½å¤Ÿæ¥æ”¶ç”¨æˆ·ä¸Šä¸‹æ–‡
interface UserContext {
  userId: string;
  email: string;
  plan: 'free' | 'pro' | 'lifetime';
  credits: number;
  permissions: string[];
}

// ç»„ä»¶åº”è¯¥æ¥å—ç”¨æˆ·ä¸Šä¸‹æ–‡ä½œä¸º prop
<ImageEditor 
  user={userContext}
  onCreditsChange={handleCreditsUpdate}
/>
```

**Nano Bananary ç°çŠ¶**ï¼š
- âŒ å®Œå…¨æ— ç”¨æˆ·æ¦‚å¿µ
- âŒ æ— æƒé™æ§åˆ¶
- âœ… æœ‰å›½é™…åŒ–å’Œä¸»é¢˜ä¸Šä¸‹æ–‡ï¼ˆå¯ä»¥å‚è€ƒï¼‰

#### âœ… èƒ½åŠ› 3ï¼šé…é¢ç®¡ç†æ¥å£

**è¦æ±‚**ï¼š
```typescript
// åº”ç”¨éœ€è¦åœ¨å…³é”®æ“ä½œå‰æ£€æŸ¥é…é¢
interface QuotaManager {
  checkQuota(action: string, cost: number): Promise<boolean>;
  consumeQuota(action: string, cost: number): Promise<void>;
  getRemaining(): Promise<number>;
}

// ä½¿ç”¨ç¤ºä¾‹
async function generateImage() {
  const canGenerate = await quotaManager.checkQuota('image_generation', 1);
  if (!canGenerate) {
    throw new Error('é…é¢ä¸è¶³');
  }
  
  const result = await aiService.generate();
  await quotaManager.consumeQuota('image_generation', 1);
  return result;
}
```

**Nano Bananary ç°çŠ¶**ï¼š
- âŒ æ— é…é¢æ¦‚å¿µ
- âŒ æ— ä½¿ç”¨é™åˆ¶
- âœ… æœ‰é”™è¯¯å¤„ç†æœºåˆ¶ï¼ˆå¯ä»¥æ‰©å±•ï¼‰



#### âœ… èƒ½åŠ› 4ï¼šæ•°æ®æŒä¹…åŒ–æ¥å£

**è¦æ±‚**ï¼š
```typescript
// åº”ç”¨éœ€è¦é€šè¿‡æ ‡å‡†æ¥å£ä¿å­˜æ•°æ®
interface DataPersistence {
  saveAsset(asset: Asset): Promise<string>;
  getAssets(userId: string, filters?: AssetFilters): Promise<Asset[]>;
  deleteAsset(assetId: string): Promise<void>;
  updateAsset(assetId: string, updates: Partial<Asset>): Promise<void>;
}

// æ•°æ®æ¨¡å‹
interface Asset {
  id: string;
  userId: string;
  type: 'image' | 'video';
  url: string;
  metadata: {
    prompt: string;
    effect: string;
    createdAt: Date;
  };
}
```

**Nano Bananary ç°çŠ¶**ï¼š
- âŒ åªæœ‰å†…å­˜å­˜å‚¨ï¼ˆassetLibrary: string[]ï¼‰
- âŒ åˆ·æ–°åæ•°æ®ä¸¢å¤±
- âœ… æœ‰æ¸…æ™°çš„æ•°æ®ç»“æ„ï¼ˆå¯ä»¥æ˜ å°„åˆ°æ•°æ®åº“ï¼‰

#### âœ… èƒ½åŠ› 5ï¼šAPI å®‰å…¨è°ƒç”¨

**è¦æ±‚**ï¼š
```typescript
// åº”ç”¨ä¸åº”è¯¥ç›´æ¥è°ƒç”¨å¤–éƒ¨ APIï¼Œè€Œæ˜¯é€šè¿‡åç«¯ä»£ç†
// âŒ é”™è¯¯åšæ³•
const result = await fetch('https://api.gemini.com', {
  headers: { 'Authorization': `Bearer ${API_KEY}` } // æš´éœ² Key
});

// âœ… æ­£ç¡®åšæ³•
const result = await fetch('/api/ai/generate', {
  method: 'POST',
  body: JSON.stringify({ prompt, images }),
  headers: { 'Authorization': `Bearer ${userToken}` } // ç”¨æˆ· token
});
```

**Nano Bananary ç°çŠ¶**ï¼š
- âŒ å‰ç«¯ç›´æ¥è°ƒç”¨ Gemini API
- âŒ API Key æš´éœ²åœ¨å®¢æˆ·ç«¯
- âœ… æœ‰ç»Ÿä¸€çš„ geminiService å°è£…ï¼ˆæ˜“äºé‡æ„ï¼‰

#### âœ… èƒ½åŠ› 6ï¼šäº‹ä»¶é€šçŸ¥æœºåˆ¶

**è¦æ±‚**ï¼š
```typescript
// åº”ç”¨éœ€è¦åœ¨å…³é”®äº‹ä»¶å‘ç”Ÿæ—¶é€šçŸ¥æ¡†æ¶
interface EventEmitter {
  emit(event: string, data: any): void;
}

// ä½¿ç”¨ç¤ºä¾‹
eventEmitter.emit('image:generated', {
  userId: user.id,
  assetId: asset.id,
  creditsUsed: 1
});

eventEmitter.emit('quota:exceeded', {
  userId: user.id,
  action: 'image_generation'
});
```

**Nano Bananary ç°çŠ¶**ï¼š
- âŒ æ— äº‹ä»¶ç³»ç»Ÿ
- âœ… æœ‰çŠ¶æ€ç®¡ç†ï¼ˆå¯ä»¥æ‰©å±•ä¸ºäº‹ä»¶ï¼‰

### 3.2 æ¨èèƒ½åŠ›æ¸…å•

è¿™äº›èƒ½åŠ›ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†ä¼šæ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒï¼š

#### ğŸŒŸ èƒ½åŠ› 7ï¼šæ‰¹é‡æ“ä½œæ”¯æŒ

```typescript
interface BatchOperations {
  generateBatch(requests: GenerationRequest[]): Promise<GenerationResult[]>;
  deleteBatch(assetIds: string[]): Promise<void>;
  downloadBatch(assetIds: string[]): Promise<Blob>;
}
```

**Nano Bananary ç°çŠ¶**ï¼š
- âœ… å·²æ”¯æŒå¤šå›¾ä¸Šä¼ 
- âœ… å·²æ”¯æŒæ‰¹é‡ä¸‹è½½
- âš ï¸ éœ€è¦ä¼˜åŒ–ï¼šæ·»åŠ é˜Ÿåˆ—ç®¡ç†

#### ğŸŒŸ èƒ½åŠ› 8ï¼šå®æ—¶è¿›åº¦åé¦ˆ

```typescript
interface ProgressTracker {
  onProgress(callback: (progress: number, message: string) => void): void;
  cancel(): void;
}
```

**Nano Bananary ç°çŠ¶**ï¼š
- âœ… æœ‰åŠ è½½çŠ¶æ€
- âœ… è§†é¢‘ç”Ÿæˆæœ‰è¿›åº¦åé¦ˆ
- âš ï¸ éœ€è¦ä¼˜åŒ–ï¼šç»Ÿä¸€è¿›åº¦æ¥å£

#### ğŸŒŸ èƒ½åŠ› 9ï¼šç¦»çº¿æ”¯æŒ

```typescript
interface OfflineCapability {
  cacheAssets(assets: Asset[]): Promise<void>;
  getOfflineAssets(): Promise<Asset[]>;
  syncWhenOnline(): Promise<void>;
}
```

**Nano Bananary ç°çŠ¶**ï¼š
- âŒ æ— ç¦»çº¿æ”¯æŒ
- âš ï¸ å¯é€‰åŠŸèƒ½ï¼šPWA + Service Worker

---

## 4. MkSaaS æ¡†æ¶èƒ½åŠ›æ˜ å°„

### 4.1 MkSaaS æä¾›çš„æ ¸å¿ƒèƒ½åŠ›

#### ğŸ” è®¤è¯ä¸æˆæƒ

**æä¾›çš„èƒ½åŠ›**ï¼š
```typescript
// Better Auth é›†æˆ
- é‚®ç®±å¯†ç ç™»å½•
- Google/GitHub OAuth
- é‚®ç®±éªŒè¯
- å¯†ç é‡ç½®
- ä¼šè¯ç®¡ç†
- è§’è‰²æƒé™ï¼ˆadmin/userï¼‰
```

**é›†æˆç‚¹**ï¼š
```typescript
// åœ¨åº”ç”¨ä¸­ä½¿ç”¨
import { auth } from '@/lib/auth';

export async function GET(req: Request) {
  const session = await auth.api.getSession({ headers: req.headers });
  if (!session) {
    return Response.json({ error: 'Unauthorized' }, { status: 401 });
  }
  
  // ä½¿ç”¨ session.user è·å–ç”¨æˆ·ä¿¡æ¯
  const user = session.user;
}
```

#### ğŸ’³ æ”¯ä»˜ä¸è®¢é˜…

**æä¾›çš„èƒ½åŠ›**ï¼š
```typescript
// Stripe é›†æˆ
- è®¢é˜…ç®¡ç†ï¼ˆæœˆä»˜/å¹´ä»˜ï¼‰
- ä¸€æ¬¡æ€§ä»˜æ¬¾ï¼ˆç»ˆèº«ä¼šå‘˜ï¼‰
- å®¢æˆ·é—¨æˆ·
- Webhook å¤„ç†
- å‘ç¥¨ç”Ÿæˆ
```

**é›†æˆç‚¹**ï¼š
```typescript
// æ£€æŸ¥ç”¨æˆ·è®¢é˜…çŠ¶æ€
import { getUserSubscription } from '@/lib/stripe';

const subscription = await getUserSubscription(userId);
if (subscription.plan === 'free') {
  // é™åˆ¶åŠŸèƒ½
}
```

#### ğŸ« ç§¯åˆ†ç³»ç»Ÿ

**æä¾›çš„èƒ½åŠ›**ï¼š
```typescript
// ç§¯åˆ†ç®¡ç†
- è´­ä¹°ç§¯åˆ†å¥—é¤
- æ³¨å†Œèµ é€ç§¯åˆ†
- ç§¯åˆ†åˆ°æœŸç®¡ç†
- äº¤æ˜“å†å²
- Cron Job è‡ªåŠ¨åˆ†é…
```

**é›†æˆç‚¹**ï¼š
```typescript
// æ¶ˆè´¹ç§¯åˆ†
import { consumeCredits, getUserCredits } from '@/lib/credits';

const credits = await getUserCredits(userId);
if (credits < cost) {
  throw new Error('ç§¯åˆ†ä¸è¶³');
}

await consumeCredits(userId, cost, {
  type: 'image_generation',
  metadata: { effect: 'pixel_art' }
});
```



#### ğŸ—„ï¸ æ•°æ®åº“ä¸ ORM

**æä¾›çš„èƒ½åŠ›**ï¼š
```typescript
// Drizzle ORM + PostgreSQL
- ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ
- è¿ç§»ç®¡ç†
- å…³ç³»æŸ¥è¯¢
- äº‹åŠ¡æ”¯æŒ
```

**é›†æˆç‚¹**ï¼š
```typescript
// å®šä¹‰åº”ç”¨æ•°æ®æ¨¡å‹
import { pgTable, text, timestamp, integer } from 'drizzle-orm/pg-core';

export const assets = pgTable('assets', {
  id: text('id').primaryKey(),
  userId: text('user_id').notNull(),
  type: text('type').notNull(), // 'image' | 'video'
  url: text('url').notNull(),
  prompt: text('prompt'),
  effect: text('effect'),
  createdAt: timestamp('created_at').defaultNow()
});

// æŸ¥è¯¢
import { db } from '@/lib/db';
const userAssets = await db.select().from(assets).where(eq(assets.userId, userId));
```

#### ğŸ“§ é‚®ä»¶ç³»ç»Ÿ

**æä¾›çš„èƒ½åŠ›**ï¼š
```typescript
// Resend + React Email
- äº‹åŠ¡æ€§é‚®ä»¶æ¨¡æ¿
- é‚®ä»¶é¢„è§ˆå·¥å…·
- é€šè®¯è®¢é˜…
```

**é›†æˆç‚¹**ï¼š
```typescript
// å‘é€è‡ªå®šä¹‰é‚®ä»¶
import { sendEmail } from '@/lib/email';

await sendEmail({
  to: user.email,
  subject: 'æ‚¨çš„å›¾åƒå·²ç”Ÿæˆ',
  template: 'image-ready',
  data: {
    userName: user.name,
    imageUrl: asset.url
  }
});
```

#### ğŸ“¦ æ–‡ä»¶å­˜å‚¨

**æä¾›çš„èƒ½åŠ›**ï¼š
```typescript
// Cloudflare R2 / S3
- æ–‡ä»¶ä¸Šä¼ 
- æ–‡ä»¶åˆ é™¤
- å…¬å…±/ç§æœ‰è®¿é—®
```

**é›†æˆç‚¹**ï¼š
```typescript
// ä¸Šä¼ ç”Ÿæˆçš„å›¾åƒ
import { uploadFile } from '@/lib/storage';

const url = await uploadFile({
  file: imageBlob,
  path: `users/${userId}/assets/${assetId}.png`,
  contentType: 'image/png'
});
```

#### ğŸ“Š åˆ†æä¸ç›‘æ§

**æä¾›çš„èƒ½åŠ›**ï¼š
```typescript
// å¤šç§åˆ†æå·¥å…·
- Vercel Analytics
- Google Analytics
- Umami / Plausible
```

**é›†æˆç‚¹**ï¼š
```typescript
// è¿½è¸ªè‡ªå®šä¹‰äº‹ä»¶
import { trackEvent } from '@/lib/analytics';

trackEvent('image_generated', {
  effect: 'pixel_art',
  userId: user.id,
  plan: user.plan
});
```

#### ğŸŒ å›½é™…åŒ–

**æä¾›çš„èƒ½åŠ›**ï¼š
```typescript
// Next-intl
- å¤šè¯­è¨€è·¯ç”±
- ç¿»è¯‘ç®¡ç†
- è¯­è¨€åˆ‡æ¢
```

**é›†æˆç‚¹**ï¼š
```typescript
// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘
import { useTranslations } from 'next-intl';

export function ImageEditor() {
  const t = useTranslations('ImageEditor');
  
  return (
    <button>{t('generate')}</button>
  );
}
```

### 4.2 MkSaaS èƒ½åŠ›ä¸åº”ç”¨éœ€æ±‚æ˜ å°„è¡¨

| åº”ç”¨éœ€æ±‚ | MkSaaS èƒ½åŠ› | é›†æˆéš¾åº¦ | ä¼˜å…ˆçº§ |
|---------|------------|---------|--------|
| ç”¨æˆ·è®¤è¯ | Better Auth | ğŸŸ¢ ä½ | ğŸ”´ é«˜ |
| ä»˜è´¹è®¢é˜… | Stripe è®¢é˜… | ğŸŸ¢ ä½ | ğŸ”´ é«˜ |
| é…é¢ç®¡ç† | ç§¯åˆ†ç³»ç»Ÿ | ğŸŸ¡ ä¸­ | ğŸ”´ é«˜ |
| æ•°æ®æŒä¹…åŒ– | Drizzle ORM | ğŸŸ¡ ä¸­ | ğŸ”´ é«˜ |
| API å®‰å…¨ | Next.js API Routes | ğŸŸ¡ ä¸­ | ğŸ”´ é«˜ |
| æ–‡ä»¶å­˜å‚¨ | R2/S3 | ğŸŸ¢ ä½ | ğŸ”´ é«˜ |
| é‚®ä»¶é€šçŸ¥ | Resend | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ |
| ç”¨æˆ·ç®¡ç† | ç®¡ç†åå° | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ |
| åˆ†æç»Ÿè®¡ | Analytics | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ |
| å›½é™…åŒ– | Next-intl | ğŸŸ¢ ä½ | ğŸŸ¢ ä½ |
| åšå®¢/æ–‡æ¡£ | Fumadocs | ğŸŸ¢ ä½ | ğŸŸ¢ ä½ |

---

## 5. é›†æˆæ¶æ„è®¾è®¡

### 5.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·ç•Œé¢å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  MkSaaS Shell (src/app/)                                  â”‚  â”‚
â”‚  â”‚  â”œâ”€ å¯¼èˆªæ  (Header)                                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ ä¾§è¾¹æ  (Sidebar)                                      â”‚  â”‚
â”‚  â”‚  â””â”€ ä¸»å†…å®¹åŒº                                              â”‚  â”‚
â”‚  â”‚      â””â”€ Nano Bananary Module                             â”‚  â”‚
â”‚  â”‚          â”œâ”€ ImageEditor (å¢å¼ºå™¨)                          â”‚  â”‚
â”‚  â”‚          â”œâ”€ AssetGallery (èµ„äº§åº“)                         â”‚  â”‚
â”‚  â”‚          â””â”€ AIChat (èŠå¤©)                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API å±‚ (BFF Pattern)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Next.js API Routes (src/app/api/)                        â”‚  â”‚
â”‚  â”‚  â”œâ”€ /api/auth/*          (è®¤è¯)                           â”‚  â”‚
â”‚  â”‚  â”œâ”€ /api/payments/*      (æ”¯ä»˜)                           â”‚  â”‚
â”‚  â”‚  â”œâ”€ /api/credits/*       (ç§¯åˆ†)                           â”‚  â”‚
â”‚  â”‚  â””â”€ /api/images/*        (å›¾åƒå¤„ç†) â† æ–°å¢                â”‚  â”‚
â”‚  â”‚      â”œâ”€ POST /generate   (ç”Ÿæˆå›¾åƒ)                       â”‚  â”‚
â”‚  â”‚      â”œâ”€ POST /edit       (ç¼–è¾‘å›¾åƒ)                       â”‚  â”‚
â”‚  â”‚      â”œâ”€ POST /chat       (AI èŠå¤©)                        â”‚  â”‚
â”‚  â”‚      â”œâ”€ POST /video      (è§†é¢‘ç”Ÿæˆ)                       â”‚  â”‚
â”‚  â”‚      â”œâ”€ GET  /assets     (è·å–èµ„äº§)                       â”‚  â”‚
â”‚  â”‚      â””â”€ DELETE /assets/:id (åˆ é™¤èµ„äº§)                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æœåŠ¡å±‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Business Logic Services (src/lib/)                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ authService          (MkSaaS æä¾›)                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ paymentService       (MkSaaS æä¾›)                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ creditsService       (MkSaaS æä¾›)                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ storageService       (MkSaaS æä¾›)                    â”‚  â”‚
â”‚  â”‚  â””â”€ imageService         (æ–°å¢) â† æ ¸å¿ƒä¸šåŠ¡é€»è¾‘            â”‚  â”‚
â”‚  â”‚      â”œâ”€ generateImage()                                   â”‚  â”‚
â”‚  â”‚      â”œâ”€ editImage()                                       â”‚  â”‚
â”‚  â”‚      â”œâ”€ generateVideo()                                   â”‚  â”‚
â”‚  â”‚      â””â”€ saveAsset()                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å±‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Database (Drizzle ORM)                                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ users                (MkSaaS æä¾›)                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ subscriptions        (MkSaaS æä¾›)                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ credits              (MkSaaS æä¾›)                    â”‚  â”‚
â”‚  â”‚  â””â”€ assets               (æ–°å¢) â† åº”ç”¨æ•°æ®                â”‚  â”‚
â”‚  â”‚      â”œâ”€ id, userId, type                                  â”‚  â”‚
â”‚  â”‚      â”œâ”€ url, prompt, effect                               â”‚  â”‚
â”‚  â”‚      â””â”€ metadata, createdAt                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¤–éƒ¨æœåŠ¡                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Gemini AI   â”‚  â”‚  Stripe      â”‚  â”‚  R2 Storage  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ç›®å½•ç»“æ„è®¾è®¡

```
mksaas-nano-bananary/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (auth)/                   # è®¤è¯ç›¸å…³é¡µé¢ (MkSaaS)
â”‚   â”‚   â”œâ”€â”€ (marketing)/              # è¥é”€é¡µé¢ (MkSaaS)
â”‚   â”‚   â”œâ”€â”€ dashboard/                # ç”¨æˆ·ä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx            # ä»ªè¡¨æ¿å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx              # ä»ªè¡¨æ¿é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ editor/               # å›¾åƒç¼–è¾‘å™¨ â† æ–°å¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ gallery/              # èµ„äº§åº“ â† æ–°å¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/                 # AI èŠå¤© â† æ–°å¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ settings/             # ç”¨æˆ·è®¾ç½®
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ api/                      # API Routes
â”‚   â”‚       â”œâ”€â”€ auth/                 # è®¤è¯ API (MkSaaS)
â”‚   â”‚       â”œâ”€â”€ payments/             # æ”¯ä»˜ API (MkSaaS)
â”‚   â”‚       â”œâ”€â”€ credits/              # ç§¯åˆ† API (MkSaaS)
â”‚   â”‚       â””â”€â”€ images/               # å›¾åƒ API â† æ–°å¢
â”‚   â”‚           â”œâ”€â”€ generate/
â”‚   â”‚           â”‚   â””â”€â”€ route.ts
â”‚   â”‚           â”œâ”€â”€ edit/
â”‚   â”‚           â”‚   â””â”€â”€ route.ts
â”‚   â”‚           â”œâ”€â”€ chat/
â”‚   â”‚           â”‚   â””â”€â”€ route.ts
â”‚   â”‚           â”œâ”€â”€ video/
â”‚   â”‚           â”‚   â””â”€â”€ route.ts
â”‚   â”‚           â””â”€â”€ assets/
â”‚   â”‚               â”œâ”€â”€ route.ts      # GET, POST
â”‚   â”‚               â””â”€â”€ [id]/
â”‚   â”‚                   â””â”€â”€ route.ts  # DELETE, PATCH
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                   # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/                       # åŸºç¡€ UI ç»„ä»¶ (MkSaaS)
â”‚   â”‚   â”œâ”€â”€ auth/                     # è®¤è¯ç»„ä»¶ (MkSaaS)
â”‚   â”‚   â”œâ”€â”€ dashboard/                # ä»ªè¡¨æ¿ç»„ä»¶ (MkSaaS)
â”‚   â”‚   â””â”€â”€ image-editor/             # å›¾åƒç¼–è¾‘å™¨ç»„ä»¶ â† æ–°å¢
â”‚   â”‚       â”œâ”€â”€ ImageEditor.tsx       # ä¸»ç¼–è¾‘å™¨
â”‚   â”‚       â”œâ”€â”€ TransformationSelector.tsx
â”‚   â”‚       â”œâ”€â”€ ImageCanvas.tsx
â”‚   â”‚       â”œâ”€â”€ ResultDisplay.tsx
â”‚   â”‚       â”œâ”€â”€ AssetGallery.tsx
â”‚   â”‚       â”œâ”€â”€ AIChat.tsx
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                          # ä¸šåŠ¡é€»è¾‘å’Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ auth.ts                   # è®¤è¯æœåŠ¡ (MkSaaS)
â”‚   â”‚   â”œâ”€â”€ db.ts                     # æ•°æ®åº“è¿æ¥ (MkSaaS)
â”‚   â”‚   â”œâ”€â”€ stripe.ts                 # Stripe æœåŠ¡ (MkSaaS)
â”‚   â”‚   â”œâ”€â”€ credits.ts                # ç§¯åˆ†æœåŠ¡ (MkSaaS)
â”‚   â”‚   â”œâ”€â”€ storage.ts                # æ–‡ä»¶å­˜å‚¨ (MkSaaS)
â”‚   â”‚   â””â”€â”€ image-service/            # å›¾åƒæœåŠ¡ â† æ–°å¢
â”‚   â”‚       â”œâ”€â”€ index.ts              # ä¸»æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ gemini-client.ts      # Gemini API å®¢æˆ·ç«¯
â”‚   â”‚       â”œâ”€â”€ image-processor.ts    # å›¾åƒå¤„ç†
â”‚   â”‚       â”œâ”€â”€ quota-manager.ts      # é…é¢ç®¡ç†
â”‚   â”‚       â””â”€â”€ asset-manager.ts      # èµ„äº§ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                           # æ•°æ®åº“æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ schema/
â”‚   â”‚   â”‚   â”œâ”€â”€ users.ts              # ç”¨æˆ·è¡¨ (MkSaaS)
â”‚   â”‚   â”‚   â”œâ”€â”€ subscriptions.ts      # è®¢é˜…è¡¨ (MkSaaS)
â”‚   â”‚   â”‚   â”œâ”€â”€ credits.ts            # ç§¯åˆ†è¡¨ (MkSaaS)
â”‚   â”‚   â”‚   â””â”€â”€ assets.ts             # èµ„äº§è¡¨ â† æ–°å¢
â”‚   â”‚   â””â”€â”€ migrations/               # æ•°æ®åº“è¿ç§»
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                       # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ website.tsx               # ç½‘ç«™é…ç½® (MkSaaS)
â”‚   â”‚   â”œâ”€â”€ credits-config.tsx        # ç§¯åˆ†é…ç½® (MkSaaS)
â”‚   â”‚   â””â”€â”€ image-effects.ts          # å›¾åƒæ•ˆæœé…ç½® â† æ–°å¢
â”‚   â”‚
â”‚   â””â”€â”€ types/                        # TypeScript ç±»å‹
â”‚       â”œâ”€â”€ auth.ts                   # è®¤è¯ç±»å‹ (MkSaaS)
â”‚       â”œâ”€â”€ payment.ts                # æ”¯ä»˜ç±»å‹ (MkSaaS)
â”‚       â””â”€â”€ image.ts                  # å›¾åƒç±»å‹ â† æ–°å¢
â”‚
â”œâ”€â”€ public/                           # é™æ€èµ„æº
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ icons/
â”‚
â”œâ”€â”€ .env.local                        # ç¯å¢ƒå˜é‡
â”œâ”€â”€ drizzle.config.ts                 # Drizzle é…ç½®
â”œâ”€â”€ next.config.js                    # Next.js é…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```



---

## 6. æ•°æ®æ¨¡å‹è®¾è®¡

### 6.1 æ ¸å¿ƒæ•°æ®è¡¨è®¾è®¡

#### Assets è¡¨ï¼ˆèµ„äº§è¡¨ï¼‰

```typescript
// src/db/schema/assets.ts
import { pgTable, text, timestamp, jsonb, integer } from 'drizzle-orm/pg-core';
import { users } from './users';

export const assets = pgTable('assets', {
  // åŸºç¡€å­—æ®µ
  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),
  userId: text('user_id').notNull().references(() => users.id, { onDelete: 'cascade' }),
  
  // èµ„äº§ä¿¡æ¯
  type: text('type').notNull(), // 'image' | 'video'
  url: text('url').notNull(),   // å­˜å‚¨åœ¨ R2 çš„ URL
  thumbnailUrl: text('thumbnail_url'), // ç¼©ç•¥å›¾
  
  // ç”Ÿæˆä¿¡æ¯
  prompt: text('prompt'),       // ç”¨æˆ·æç¤º
  effect: text('effect'),       // ä½¿ç”¨çš„æ•ˆæœ
  model: text('model'),         // AI æ¨¡å‹
  
  // å…ƒæ•°æ®
  metadata: jsonb('metadata').$type<{
    width?: number;
    height?: number;
    fileSize?: number;
    mimeType?: string;
    aspectRatio?: string;
    generationTime?: number; // ç”Ÿæˆè€—æ—¶ï¼ˆç§’ï¼‰
  }>(),
  
  // ç»Ÿè®¡
  viewCount: integer('view_count').default(0),
  downloadCount: integer('download_count').default(0),
  
  // æ—¶é—´æˆ³
  createdAt: timestamp('created_at').defaultNow().notNull(),
  updatedAt: timestamp('updated_at').defaultNow().notNull()
});

// ç´¢å¼•
export const assetsUserIdIdx = index('assets_user_id_idx').on(assets.userId);
export const assetsCreatedAtIdx = index('assets_created_at_idx').on(assets.createdAt);
```

#### Usage Logs è¡¨ï¼ˆä½¿ç”¨æ—¥å¿—è¡¨ï¼‰

```typescript
// src/db/schema/usage-logs.ts
export const usageLogs = pgTable('usage_logs', {
  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),
  userId: text('user_id').notNull().references(() => users.id),
  
  // æ“ä½œä¿¡æ¯
  action: text('action').notNull(), // 'image_generation' | 'image_edit' | 'video_generation'
  creditsUsed: integer('credits_used').notNull(),
  
  // å…³è”èµ„äº§
  assetId: text('asset_id').references(() => assets.id),
  
  // è¯¦ç»†ä¿¡æ¯
  details: jsonb('details').$type<{
    effect?: string;
    model?: string;
    prompt?: string;
    success?: boolean;
    errorMessage?: string;
  }>(),
  
  createdAt: timestamp('created_at').defaultNow().notNull()
});
```

#### User Preferences è¡¨ï¼ˆç”¨æˆ·åå¥½è¡¨ï¼‰

```typescript
// src/db/schema/user-preferences.ts
export const userPreferences = pgTable('user_preferences', {
  userId: text('user_id').primaryKey().references(() => users.id),
  
  // ç¼–è¾‘å™¨åå¥½
  defaultEffect: text('default_effect'),
  defaultAspectRatio: text('default_aspect_ratio').default('Auto'),
  autoSaveAssets: boolean('auto_save_assets').default(true),
  
  // èŠå¤©åå¥½
  chatHistoryLength: integer('chat_history_length').default(8),
  enableAiPreprocessing: boolean('enable_ai_preprocessing').default(false),
  
  // é€šçŸ¥åå¥½
  emailOnGeneration: boolean('email_on_generation').default(false),
  emailOnQuotaLow: boolean('email_on_quota_low').default(true),
  
  updatedAt: timestamp('updated_at').defaultNow().notNull()
});
```

### 6.2 æ•°æ®å…³ç³»å›¾

```
users (MkSaaS)
  â”œâ”€ 1:N â†’ assets (æ–°å¢)
  â”œâ”€ 1:N â†’ usageLogs (æ–°å¢)
  â”œâ”€ 1:1 â†’ userPreferences (æ–°å¢)
  â”œâ”€ 1:N â†’ subscriptions (MkSaaS)
  â””â”€ 1:N â†’ creditTransactions (MkSaaS)

assets
  â”œâ”€ N:1 â†’ users
  â””â”€ 1:N â†’ usageLogs

subscriptions (MkSaaS)
  â””â”€ N:1 â†’ users

creditTransactions (MkSaaS)
  â””â”€ N:1 â†’ users
```

---

## 7. API è®¾è®¡è§„èŒƒ

### 7.1 RESTful API è®¾è®¡

#### POST /api/images/generate

**åŠŸèƒ½**ï¼šç”Ÿæˆæ–°å›¾åƒ

**è¯·æ±‚**ï¼š
```typescript
{
  prompt: string;
  effect?: string;          // é¢„è®¾æ•ˆæœ ID
  images?: string[];        // Base64 å›¾åƒï¼ˆç”¨äºç¼–è¾‘ï¼‰
  mask?: string;            // Base64 è’™ç‰ˆ
  aspectRatio?: string;     // '1:1' | '16:9' | '9:16' | '4:3' | '3:4'
  numVariants?: number;     // ç”Ÿæˆå˜ä½“æ•°é‡ï¼ˆ1-4ï¼‰
}
```

**å“åº”**ï¼š
```typescript
{
  success: boolean;
  data: {
    assets: Array<{
      id: string;
      url: string;
      thumbnailUrl: string;
    }>;
    creditsUsed: number;
    remainingCredits: number;
  };
  error?: string;
}
```

**å®ç°ç¤ºä¾‹**ï¼š
```typescript
// src/app/api/images/generate/route.ts
import { auth } from '@/lib/auth';
import { consumeCredits, getUserCredits } from '@/lib/credits';
import { imageService } from '@/lib/image-service';

export async function POST(req: Request) {
  // 1. è®¤è¯
  const session = await auth.api.getSession({ headers: req.headers });
  if (!session) {
    return Response.json({ error: 'Unauthorized' }, { status: 401 });
  }
  
  // 2. è§£æè¯·æ±‚
  const body = await req.json();
  const { prompt, effect, images, mask, aspectRatio, numVariants = 1 } = body;
  
  // 3. æ£€æŸ¥é…é¢
  const creditsRequired = numVariants * 1; // æ¯ä¸ªå˜ä½“ 1 ç§¯åˆ†
  const userCredits = await getUserCredits(session.user.id);
  
  if (userCredits < creditsRequired) {
    return Response.json({ 
      error: 'ç§¯åˆ†ä¸è¶³',
      data: { requiredCredits: creditsRequired, userCredits }
    }, { status: 402 });
  }
  
  try {
    // 4. è°ƒç”¨å›¾åƒæœåŠ¡
    const results = await imageService.generate({
      userId: session.user.id,
      prompt,
      effect,
      images,
      mask,
      aspectRatio,
      numVariants
    });
    
    // 5. æ¶ˆè´¹ç§¯åˆ†
    await consumeCredits(session.user.id, creditsRequired, {
      type: 'image_generation',
      metadata: { effect, numVariants }
    });
    
    // 6. è¿”å›ç»“æœ
    const remainingCredits = await getUserCredits(session.user.id);
    
    return Response.json({
      success: true,
      data: {
        assets: results,
        creditsUsed: creditsRequired,
        remainingCredits
      }
    });
    
  } catch (error) {
    console.error('Image generation failed:', error);
    return Response.json({ 
      error: error instanceof Error ? error.message : 'ç”Ÿæˆå¤±è´¥'
    }, { status: 500 });
  }
}
```

#### GET /api/images/assets

**åŠŸèƒ½**ï¼šè·å–ç”¨æˆ·èµ„äº§åˆ—è¡¨

**æŸ¥è¯¢å‚æ•°**ï¼š
```typescript
{
  page?: number;           // é¡µç ï¼ˆé»˜è®¤ 1ï¼‰
  limit?: number;          // æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 20ï¼‰
  type?: 'image' | 'video' | 'all'; // ç±»å‹è¿‡æ»¤
  sortBy?: 'createdAt' | 'viewCount' | 'downloadCount';
  order?: 'asc' | 'desc';
}
```

**å“åº”**ï¼š
```typescript
{
  success: boolean;
  data: {
    assets: Asset[];
    pagination: {
      page: number;
      limit: number;
      total: number;
      totalPages: number;
    };
  };
}
```

#### DELETE /api/images/assets/[id]

**åŠŸèƒ½**ï¼šåˆ é™¤èµ„äº§

**å“åº”**ï¼š
```typescript
{
  success: boolean;
  message?: string;
  error?: string;
}
```

### 7.2 å®æ—¶é€šä¿¡è®¾è®¡ï¼ˆå¯é€‰ï¼‰

å¯¹äºéœ€è¦å®æ—¶è¿›åº¦åé¦ˆçš„åœºæ™¯ï¼ˆå¦‚è§†é¢‘ç”Ÿæˆï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ Server-Sent Events (SSE)ï¼š

```typescript
// src/app/api/images/video/stream/route.ts
export async function POST(req: Request) {
  const session = await auth.api.getSession({ headers: req.headers });
  if (!session) {
    return Response.json({ error: 'Unauthorized' }, { status: 401 });
  }
  
  const body = await req.json();
  
  // åˆ›å»º SSE æµ
  const stream = new ReadableStream({
    async start(controller) {
      const encoder = new TextEncoder();
      
      try {
        await imageService.generateVideo({
          ...body,
          userId: session.user.id,
          onProgress: (progress, message) => {
            // å‘é€è¿›åº¦æ›´æ–°
            controller.enqueue(
              encoder.encode(`data: ${JSON.stringify({ progress, message })}\n\n`)
            );
          }
        });
        
        controller.close();
      } catch (error) {
        controller.enqueue(
          encoder.encode(`data: ${JSON.stringify({ error: error.message })}\n\n`)
        );
        controller.close();
      }
    }
  });
  
  return new Response(stream, {
    headers: {
      'Content-Type': 'text/event-stream',
      'Cache-Control': 'no-cache',
      'Connection': 'keep-alive'
    }
  });
}
```

---

## 8. å‰ç«¯é›†æˆç­–ç•¥

### 8.1 ç»„ä»¶é›†æˆæ¨¡å¼

#### æ¨¡å¼ 1ï¼šé¡µé¢çº§é›†æˆï¼ˆæ¨èï¼‰

```typescript
// src/app/dashboard/editor/page.tsx
import { ImageEditor } from '@/components/image-editor';
import { getUserCredits } from '@/lib/credits';
import { auth } from '@/lib/auth';

export default async function EditorPage() {
  const session = await auth.api.getSession();
  if (!session) redirect('/login');
  
  const credits = await getUserCredits(session.user.id);
  
  return (
    <div className="container mx-auto p-6">
      <ImageEditor 
        user={session.user}
        credits={credits}
      />
    </div>
  );
}
```

#### æ¨¡å¼ 2ï¼šå¸ƒå±€çº§é›†æˆ

```typescript
// src/app/dashboard/layout.tsx
import { DashboardNav } from '@/components/dashboard/nav';
import { CreditsBadge } from '@/components/dashboard/credits-badge';

export default function DashboardLayout({ children }) {
  return (
    <div className="flex h-screen">
      {/* ä¾§è¾¹æ  */}
      <aside className="w-64 border-r">
        <DashboardNav items={[
          { href: '/dashboard', label: 'é¦–é¡µ', icon: 'home' },
          { href: '/dashboard/editor', label: 'å›¾åƒç¼–è¾‘', icon: 'image' },
          { href: '/dashboard/gallery', label: 'èµ„äº§åº“', icon: 'folder' },
          { href: '/dashboard/chat', label: 'AI èŠå¤©', icon: 'chat' }
        ]} />
      </aside>
      
      {/* ä¸»å†…å®¹ */}
      <main className="flex-1 overflow-auto">
        {/* é¡¶éƒ¨æ  */}
        <header className="border-b p-4 flex justify-between items-center">
          <h1>Nano Bananary</h1>
          <CreditsBadge />
        </header>
        
        {/* é¡µé¢å†…å®¹ */}
        <div className="p-6">
          {children}
        </div>
      </main>
    </div>
  );
}
```

### 8.2 çŠ¶æ€ç®¡ç†ç­–ç•¥

#### ä½¿ç”¨ React Context + Server Actions

```typescript
// src/components/image-editor/context.tsx
'use client';

import { createContext, useContext, useState } from 'react';

interface EditorContextType {
  credits: number;
  updateCredits: (amount: number) => void;
  isGenerating: boolean;
  setIsGenerating: (value: boolean) => void;
}

const EditorContext = createContext<EditorContextType | null>(null);

export function EditorProvider({ children, initialCredits }) {
  const [credits, setCredits] = useState(initialCredits);
  const [isGenerating, setIsGenerating] = useState(false);
  
  const updateCredits = (amount: number) => {
    setCredits(prev => prev + amount);
  };
  
  return (
    <EditorContext.Provider value={{
      credits,
      updateCredits,
      isGenerating,
      setIsGenerating
    }}>
      {children}
    </EditorContext.Provider>
  );
}

export const useEditor = () => {
  const context = useContext(EditorContext);
  if (!context) throw new Error('useEditor must be used within EditorProvider');
  return context;
};
```

#### ä½¿ç”¨ Server Actions

```typescript
// src/app/actions/image-actions.ts
'use server';

import { auth } from '@/lib/auth';
import { imageService } from '@/lib/image-service';
import { revalidatePath } from 'next/cache';

export async function generateImage(formData: FormData) {
  const session = await auth.api.getSession();
  if (!session) {
    return { error: 'Unauthorized' };
  }
  
  const prompt = formData.get('prompt') as string;
  const effect = formData.get('effect') as string;
  
  try {
    const result = await imageService.generate({
      userId: session.user.id,
      prompt,
      effect
    });
    
    // é‡æ–°éªŒè¯èµ„äº§åº“é¡µé¢
    revalidatePath('/dashboard/gallery');
    
    return { success: true, data: result };
  } catch (error) {
    return { error: error.message };
  }
}
```



---

## 9. ç”¨æˆ·ä½“éªŒè®¾è®¡

### 9.1 ç”¨æˆ·æµç¨‹è®¾è®¡

#### æ–°ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨æµç¨‹

```
1. è®¿é—®ç½‘ç«™ â†’ æŸ¥çœ‹è½åœ°é¡µ
   â†“
2. æ³¨å†Œè´¦æˆ· â†’ è·å¾— 10 å…è´¹ç§¯åˆ†
   â†“
3. è¿›å…¥ä»ªè¡¨æ¿ â†’ çœ‹åˆ°å¼•å¯¼æ•™ç¨‹
   â†“
4. ä¸Šä¼ ç¬¬ä¸€å¼ å›¾ç‰‡ â†’ é€‰æ‹©æ•ˆæœ â†’ ç”Ÿæˆï¼ˆæ¶ˆè€— 1 ç§¯åˆ†ï¼‰
   â†“
5. æŸ¥çœ‹ç»“æœ â†’ ä¿å­˜åˆ°èµ„äº§åº“
   â†“
6. ç§¯åˆ†ç”¨å®Œ â†’ å¼•å¯¼è´­ä¹°ç§¯åˆ†æˆ–è®¢é˜…
```

#### ä»˜è´¹ç”¨æˆ·æµç¨‹

```
å…è´¹ç”¨æˆ· (10 ç§¯åˆ†)
   â†“
é€‰æ‹©ä»˜è´¹æ–¹æ¡ˆï¼š
   â”œâ”€ è´­ä¹°ç§¯åˆ†åŒ… (ä¸€æ¬¡æ€§)
   â”‚   â””â”€ 100 ç§¯åˆ† $9.99
   â”‚   â””â”€ 500 ç§¯åˆ† $39.99
   â”‚
   â””â”€ è®¢é˜…ä¼šå‘˜ (æŒ‰æœˆ/å¹´)
       â”œâ”€ Pro ($19/æœˆ): æ¯æœˆ 200 ç§¯åˆ† + é«˜çº§åŠŸèƒ½
       â””â”€ Lifetime ($199): æ— é™ç§¯åˆ† + æ‰€æœ‰åŠŸèƒ½
```

### 9.2 é…é¢æç¤ºè®¾è®¡

#### ç§¯åˆ†ä¸è¶³æç¤º

```typescript
// src/components/image-editor/QuotaWarning.tsx
export function QuotaWarning({ credits, required }) {
  if (credits >= required) return null;
  
  return (
    <Alert variant="warning">
      <AlertTitle>ç§¯åˆ†ä¸è¶³</AlertTitle>
      <AlertDescription>
        æ­¤æ“ä½œéœ€è¦ {required} ç§¯åˆ†ï¼Œæ‚¨å½“å‰æœ‰ {credits} ç§¯åˆ†ã€‚
      </AlertDescription>
      <div className="mt-4 flex gap-2">
        <Button asChild>
          <Link href="/dashboard/credits">è´­ä¹°ç§¯åˆ†</Link>
        </Button>
        <Button variant="outline" asChild>
          <Link href="/pricing">æŸ¥çœ‹è®¢é˜…æ–¹æ¡ˆ</Link>
        </Button>
      </div>
    </Alert>
  );
}
```

#### å®æ—¶ç§¯åˆ†æ˜¾ç¤º

```typescript
// src/components/dashboard/credits-badge.tsx
'use client';

import { useEffect, useState } from 'react';

export function CreditsBadge() {
  const [credits, setCredits] = useState(0);
  
  useEffect(() => {
    // è®¢é˜…ç§¯åˆ†æ›´æ–°äº‹ä»¶
    const unsubscribe = subscribeToCreditsUpdate((newCredits) => {
      setCredits(newCredits);
    });
    
    return unsubscribe;
  }, []);
  
  return (
    <div className="flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full">
      <CoinIcon className="w-5 h-5" />
      <span className="font-semibold">{credits}</span>
      <span className="text-sm text-muted-foreground">ç§¯åˆ†</span>
    </div>
  );
}
```

### 9.3 é”™è¯¯å¤„ç†ä¸ç”¨æˆ·åé¦ˆ

#### ç»Ÿä¸€é”™è¯¯å¤„ç†

```typescript
// src/lib/error-handler.ts
export class AppError extends Error {
  constructor(
    message: string,
    public code: string,
    public statusCode: number = 500,
    public userMessage?: string
  ) {
    super(message);
  }
}

export const ErrorCodes = {
  INSUFFICIENT_CREDITS: 'INSUFFICIENT_CREDITS',
  QUOTA_EXCEEDED: 'QUOTA_EXCEEDED',
  INVALID_INPUT: 'INVALID_INPUT',
  AI_SERVICE_ERROR: 'AI_SERVICE_ERROR',
  STORAGE_ERROR: 'STORAGE_ERROR'
} as const;

export function handleError(error: unknown) {
  if (error instanceof AppError) {
    return {
      error: error.userMessage || error.message,
      code: error.code,
      statusCode: error.statusCode
    };
  }
  
  console.error('Unexpected error:', error);
  return {
    error: 'æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•',
    code: 'UNKNOWN_ERROR',
    statusCode: 500
  };
}
```

#### ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

```typescript
// src/components/image-editor/ErrorDisplay.tsx
export function ErrorDisplay({ error }) {
  const errorMessages = {
    INSUFFICIENT_CREDITS: {
      title: 'ç§¯åˆ†ä¸è¶³',
      description: 'æ‚¨çš„ç§¯åˆ†ä¸è¶³ä»¥å®Œæˆæ­¤æ“ä½œ',
      action: { label: 'è´­ä¹°ç§¯åˆ†', href: '/dashboard/credits' }
    },
    QUOTA_EXCEEDED: {
      title: 'å·²è¾¾ä½¿ç”¨ä¸Šé™',
      description: 'æ‚¨ä»Šå¤©çš„ç”Ÿæˆæ¬¡æ•°å·²è¾¾ä¸Šé™ï¼Œè¯·æ˜å¤©å†è¯•æˆ–å‡çº§å¥—é¤',
      action: { label: 'å‡çº§å¥—é¤', href: '/pricing' }
    },
    AI_SERVICE_ERROR: {
      title: 'AI æœåŠ¡æš‚æ—¶ä¸å¯ç”¨',
      description: 'è¯·ç¨åé‡è¯•ï¼Œå¦‚æœé—®é¢˜æŒç»­è¯·è”ç³»å®¢æœ',
      action: { label: 'é‡è¯•', onClick: () => window.location.reload() }
    }
  };
  
  const config = errorMessages[error.code] || {
    title: 'å‡ºé”™äº†',
    description: error.message,
    action: null
  };
  
  return (
    <Alert variant="destructive">
      <AlertTitle>{config.title}</AlertTitle>
      <AlertDescription>{config.description}</AlertDescription>
      {config.action && (
        <Button className="mt-4" {...config.action}>
          {config.action.label}
        </Button>
      )}
    </Alert>
  );
}
```

---

## 10. å®‰å…¨ä¸æ€§èƒ½

### 10.1 å®‰å…¨æœ€ä½³å®è·µ

#### API Key ä¿æŠ¤

```typescript
// âŒ é”™è¯¯ï¼šå‰ç«¯æš´éœ² API Key
const gemini = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);

// âœ… æ­£ç¡®ï¼šåç«¯ä»£ç†
// src/lib/image-service/gemini-client.ts
import { GoogleGenerativeAI } from '@google/genai';

class GeminiClient {
  private client: GoogleGenerativeAI;
  
  constructor() {
    // API Key åªåœ¨æœåŠ¡ç«¯ä½¿ç”¨
    if (typeof window !== 'undefined') {
      throw new Error('GeminiClient can only be used on the server');
    }
    
    this.client = new GoogleGenerativeAI(process.env.GEMINI_API_KEY!);
  }
  
  async generate(params) {
    // å®ç°ç”Ÿæˆé€»è¾‘
  }
}

export const geminiClient = new GeminiClient();
```

#### è¾“å…¥éªŒè¯

```typescript
// src/lib/validators/image-validator.ts
import { z } from 'zod';

export const generateImageSchema = z.object({
  prompt: z.string().min(1).max(1000),
  effect: z.string().optional(),
  images: z.array(z.string()).max(10).optional(),
  mask: z.string().optional(),
  aspectRatio: z.enum(['Auto', '1:1', '16:9', '9:16', '4:3', '3:4']).optional(),
  numVariants: z.number().int().min(1).max(4).default(1)
});

// åœ¨ API Route ä¸­ä½¿ç”¨
export async function POST(req: Request) {
  const body = await req.json();
  
  // éªŒè¯è¾“å…¥
  const result = generateImageSchema.safeParse(body);
  if (!result.success) {
    return Response.json({ 
      error: 'æ— æ•ˆçš„è¯·æ±‚å‚æ•°',
      details: result.error.errors
    }, { status: 400 });
  }
  
  // ç»§ç»­å¤„ç†...
}
```

#### é€Ÿç‡é™åˆ¶

```typescript
// src/lib/rate-limiter.ts
import { Ratelimit } from '@upstash/ratelimit';
import { Redis } from '@upstash/redis';

const redis = new Redis({
  url: process.env.UPSTASH_REDIS_URL!,
  token: process.env.UPSTASH_REDIS_TOKEN!
});

export const rateLimiter = new Ratelimit({
  redis,
  limiter: Ratelimit.slidingWindow(10, '1 m'), // æ¯åˆ†é’Ÿ 10 æ¬¡
  analytics: true
});

// åœ¨ API Route ä¸­ä½¿ç”¨
export async function POST(req: Request) {
  const session = await auth.api.getSession({ headers: req.headers });
  
  const { success } = await rateLimiter.limit(session.user.id);
  if (!success) {
    return Response.json({ 
      error: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'
    }, { status: 429 });
  }
  
  // ç»§ç»­å¤„ç†...
}
```

### 10.2 æ€§èƒ½ä¼˜åŒ–

#### å›¾åƒä¼˜åŒ–

```typescript
// src/lib/image-service/image-processor.ts
import sharp from 'sharp';

export class ImageProcessor {
  // ç”Ÿæˆç¼©ç•¥å›¾
  async generateThumbnail(imageBuffer: Buffer): Promise<Buffer> {
    return sharp(imageBuffer)
      .resize(400, 400, { fit: 'inside' })
      .webp({ quality: 80 })
      .toBuffer();
  }
  
  // å‹ç¼©å›¾åƒ
  async compressImage(imageBuffer: Buffer, quality: number = 85): Promise<Buffer> {
    return sharp(imageBuffer)
      .webp({ quality })
      .toBuffer();
  }
  
  // æ·»åŠ æ°´å°
  async addWatermark(imageBuffer: Buffer, text: string): Promise<Buffer> {
    const watermark = Buffer.from(
      `<svg width="200" height="50">
        <text x="10" y="30" font-size="20" fill="rgba(255,255,255,0.5)">
          ${text}
        </text>
      </svg>`
    );
    
    return sharp(imageBuffer)
      .composite([{ input: watermark, gravity: 'southeast' }])
      .toBuffer();
  }
}
```

#### æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

```typescript
// src/lib/image-service/asset-manager.ts
import { db } from '@/lib/db';
import { assets } from '@/db/schema';
import { eq, desc, and } from 'drizzle-orm';

export class AssetManager {
  // åˆ†é¡µæŸ¥è¯¢ï¼ˆå¸¦ç¼“å­˜ï¼‰
  async getUserAssets(userId: string, page: number = 1, limit: number = 20) {
    const offset = (page - 1) * limit;
    
    // ä½¿ç”¨ Drizzle çš„é«˜æ•ˆæŸ¥è¯¢
    const [items, totalCount] = await Promise.all([
      db.select()
        .from(assets)
        .where(eq(assets.userId, userId))
        .orderBy(desc(assets.createdAt))
        .limit(limit)
        .offset(offset),
      
      db.select({ count: count() })
        .from(assets)
        .where(eq(assets.userId, userId))
    ]);
    
    return {
      items,
      pagination: {
        page,
        limit,
        total: totalCount[0].count,
        totalPages: Math.ceil(totalCount[0].count / limit)
      }
    };
  }
  
  // æ‰¹é‡åˆ é™¤ï¼ˆäº‹åŠ¡ï¼‰
  async deleteAssets(assetIds: string[], userId: string) {
    return db.transaction(async (tx) => {
      // 1. éªŒè¯æ‰€æœ‰èµ„äº§å±äºè¯¥ç”¨æˆ·
      const ownedAssets = await tx.select()
        .from(assets)
        .where(and(
          inArray(assets.id, assetIds),
          eq(assets.userId, userId)
        ));
      
      if (ownedAssets.length !== assetIds.length) {
        throw new Error('éƒ¨åˆ†èµ„äº§ä¸å­˜åœ¨æˆ–æ— æƒåˆ é™¤');
      }
      
      // 2. ä»å­˜å‚¨ä¸­åˆ é™¤æ–‡ä»¶
      await Promise.all(
        ownedAssets.map(asset => storageService.deleteFile(asset.url))
      );
      
      // 3. ä»æ•°æ®åº“ä¸­åˆ é™¤è®°å½•
      await tx.delete(assets)
        .where(inArray(assets.id, assetIds));
    });
  }
}
```

#### ç¼“å­˜ç­–ç•¥

```typescript
// src/lib/cache.ts
import { unstable_cache } from 'next/cache';

// ç¼“å­˜ç”¨æˆ·ç§¯åˆ†ï¼ˆ5 åˆ†é’Ÿï¼‰
export const getCachedUserCredits = unstable_cache(
  async (userId: string) => {
    return getUserCredits(userId);
  },
  ['user-credits'],
  {
    revalidate: 300, // 5 åˆ†é’Ÿ
    tags: ['credits']
  }
);

// ç¼“å­˜æ•ˆæœåˆ—è¡¨ï¼ˆ1 å°æ—¶ï¼‰
export const getCachedEffects = unstable_cache(
  async () => {
    return TRANSFORMATION_EFFECTS;
  },
  ['effects'],
  {
    revalidate: 3600 // 1 å°æ—¶
  }
);

// æ‰‹åŠ¨é‡æ–°éªŒè¯ç¼“å­˜
import { revalidateTag } from 'next/cache';

export async function updateUserCredits(userId: string, amount: number) {
  // æ›´æ–°æ•°æ®åº“
  await db.update(users)
    .set({ credits: sql`credits + ${amount}` })
    .where(eq(users.id, userId));
  
  // é‡æ–°éªŒè¯ç¼“å­˜
  revalidateTag('credits');
}
```

---

## 11. å®æ–½è·¯çº¿å›¾

### 11.1 é˜¶æ®µ 1ï¼šåŸºç¡€é›†æˆï¼ˆ2-3 å‘¨ï¼‰

#### Week 1: ç¯å¢ƒæ­å»ºä¸æ•°æ®æ¨¡å‹

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] Fork MkSaaS æ¨¡æ¿ä»“åº“
- [ ] é…ç½®å¼€å‘ç¯å¢ƒï¼ˆæ•°æ®åº“ã€ç¯å¢ƒå˜é‡ï¼‰
- [ ] è®¾è®¡å¹¶åˆ›å»ºæ•°æ®è¡¨ï¼ˆassets, usageLogs, userPreferencesï¼‰
- [ ] è¿è¡Œæ•°æ®åº“è¿ç§»
- [ ] æµ‹è¯• MkSaaS åŸºç¡€åŠŸèƒ½ï¼ˆè®¤è¯ã€æ”¯ä»˜ï¼‰

**äº¤ä»˜ç‰©**ï¼š
- å¯è¿è¡Œçš„ MkSaaS ç¯å¢ƒ
- å®Œæ•´çš„æ•°æ®åº“æ¨¡å¼

#### Week 2: åç«¯ API å¼€å‘

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] åˆ›å»º Image Service æ ¸å¿ƒé€»è¾‘
- [ ] å®ç° Gemini API å®¢æˆ·ç«¯ï¼ˆåç«¯ä»£ç†ï¼‰
- [ ] å¼€å‘ API Routesï¼ˆ/api/images/*ï¼‰
- [ ] é›†æˆç§¯åˆ†ç³»ç»Ÿ
- [ ] å®ç°é…é¢æ£€æŸ¥å’Œæ¶ˆè´¹
- [ ] æ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—

**äº¤ä»˜ç‰©**ï¼š
- å®Œæ•´çš„åç«¯ API
- API æ–‡æ¡£

#### Week 3: å‰ç«¯ç»„ä»¶è¿ç§»

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] é‡æ„ nano-bananary ç»„ä»¶ä¸ºæ¨¡å—åŒ–ç»“æ„
- [ ] åˆ›å»º ImageEditor é¡µé¢
- [ ] é›†æˆç”¨æˆ·è®¤è¯
- [ ] è¿æ¥åç«¯ API
- [ ] å®ç°ç§¯åˆ†æ˜¾ç¤ºå’Œæç¤º
- [ ] æµ‹è¯•ç«¯åˆ°ç«¯æµç¨‹

**äº¤ä»˜ç‰©**ï¼š
- å¯ç”¨çš„å›¾åƒç¼–è¾‘å™¨
- åŸºç¡€ç”¨æˆ·æµç¨‹

### 11.2 é˜¶æ®µ 2ï¼šåŠŸèƒ½å®Œå–„ï¼ˆ2-3 å‘¨ï¼‰

#### Week 4: èµ„äº§åº“ä¸å­˜å‚¨

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] é›†æˆ Cloudflare R2 å­˜å‚¨
- [ ] å®ç°èµ„äº§ä¸Šä¼ å’Œç®¡ç†
- [ ] åˆ›å»º AssetGallery ç»„ä»¶
- [ ] æ·»åŠ ç¼©ç•¥å›¾ç”Ÿæˆ
- [ ] å®ç°æ‰¹é‡æ“ä½œï¼ˆä¸‹è½½ã€åˆ é™¤ï¼‰
- [ ] ä¼˜åŒ–å›¾åƒåŠ è½½æ€§èƒ½

#### Week 5: AI èŠå¤©åŠŸèƒ½

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] è¿ç§» AI èŠå¤©ç»„ä»¶
- [ ] å®ç°èŠå¤©å†å²æŒä¹…åŒ–
- [ ] æ·»åŠ æµå¼å“åº”æ”¯æŒ
- [ ] é›†æˆé…é¢ç®¡ç†
- [ ] ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

#### Week 6: æµ‹è¯•ä¸ä¼˜åŒ–

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] è¿›è¡Œé›†æˆæµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜ã€æ‡’åŠ è½½ï¼‰
- [ ] å®‰å…¨å®¡è®¡
- [ ] Bug ä¿®å¤

### 11.3 é˜¶æ®µ 3ï¼šå•†ä¸šåŒ–ä¸ä¸Šçº¿ï¼ˆ1-2 å‘¨ï¼‰

#### Week 7: å•†ä¸šåŒ–é…ç½®

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] é…ç½® Stripe äº§å“å’Œä»·æ ¼
- [ ] è®¾ç½®ç§¯åˆ†å¥—é¤
- [ ] åˆ›å»ºå®šä»·é¡µé¢
- [ ] é…ç½®é‚®ä»¶æ¨¡æ¿
- [ ] è®¾ç½®åˆ†æå·¥å…·

#### Week 8: ä¸Šçº¿å‡†å¤‡

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] åˆ›å»ºè¥é”€è½åœ°é¡µ
- [ ] ç¼–å†™ç”¨æˆ·æ–‡æ¡£
- [ ] é…ç½®ç”Ÿäº§ç¯å¢ƒ
- [ ] éƒ¨ç½²åˆ° Vercel
- [ ] ç›‘æ§å’Œæ—¥å¿—è®¾ç½®
- [ ] è½¯å¯åŠ¨æµ‹è¯•

---

## 12. æœ€ä½³å®è·µæ¸…å•

### 12.1 å¼€å‘é˜¶æ®µ

#### âœ… ä»£ç ç»„ç»‡
- [ ] ä½¿ç”¨æ¸…æ™°çš„ç›®å½•ç»“æ„
- [ ] éµå¾ª Next.js çº¦å®š
- [ ] ç»„ä»¶å•ä¸€èŒè´£
- [ ] æå–å¯å¤ç”¨é€»è¾‘ä¸º hooks
- [ ] ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼

#### âœ… æ•°æ®ç®¡ç†
- [ ] ä½¿ç”¨ Drizzle ORM ç±»å‹å®‰å…¨
- [ ] å®šä¹‰æ¸…æ™°çš„æ•°æ®æ¨¡å‹
- [ ] ä½¿ç”¨æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
- [ ] å®ç°æ•°æ®éªŒè¯ï¼ˆZodï¼‰
- [ ] ä½¿ç”¨äº‹åŠ¡å¤„ç†å…³é”®æ“ä½œ

#### âœ… API è®¾è®¡
- [ ] RESTful é£æ ¼
- [ ] ç»Ÿä¸€çš„å“åº”æ ¼å¼
- [ ] å®Œå–„çš„é”™è¯¯å¤„ç†
- [ ] è¾“å…¥éªŒè¯
- [ ] é€Ÿç‡é™åˆ¶

### 12.2 å®‰å…¨é˜¶æ®µ

#### âœ… è®¤è¯ä¸æˆæƒ
- [ ] æ‰€æœ‰ API éƒ½éœ€è¦è®¤è¯
- [ ] éªŒè¯ç”¨æˆ·æƒé™
- [ ] ä½¿ç”¨ HTTPS
- [ ] å®‰å…¨çš„ä¼šè¯ç®¡ç†
- [ ] CSRF ä¿æŠ¤

#### âœ… æ•°æ®å®‰å…¨
- [ ] API Key å­˜å‚¨åœ¨æœåŠ¡ç«¯
- [ ] æ•æ„Ÿæ•°æ®åŠ å¯†
- [ ] è¾“å…¥æ¸…ç†å’ŒéªŒè¯
- [ ] SQL æ³¨å…¥é˜²æŠ¤ï¼ˆORM è‡ªåŠ¨å¤„ç†ï¼‰
- [ ] XSS é˜²æŠ¤

### 12.3 æ€§èƒ½é˜¶æ®µ

#### âœ… å‰ç«¯ä¼˜åŒ–
- [ ] å›¾åƒæ‡’åŠ è½½
- [ ] ä»£ç åˆ†å‰²
- [ ] ä½¿ç”¨ Next.js Image ç»„ä»¶
- [ ] å®ç°è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§åˆ—è¡¨ï¼‰
- [ ] ä¼˜åŒ– Bundle å¤§å°

#### âœ… åç«¯ä¼˜åŒ–
- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- [ ] ä½¿ç”¨ç¼“å­˜ï¼ˆRedis/Next.js Cacheï¼‰
- [ ] æ‰¹é‡æ“ä½œ
- [ ] å¼‚æ­¥å¤„ç†é•¿ä»»åŠ¡
- [ ] CDN åŠ é€Ÿé™æ€èµ„æº

### 12.4 ç”¨æˆ·ä½“éªŒ

#### âœ… äº¤äº’è®¾è®¡
- [ ] åŠ è½½çŠ¶æ€æç¤º
- [ ] é”™è¯¯å‹å¥½æç¤º
- [ ] æ“ä½œç¡®è®¤ï¼ˆåˆ é™¤ç­‰ï¼‰
- [ ] é”®ç›˜å¿«æ·é”®
- [ ] å“åº”å¼è®¾è®¡

#### âœ… å¼•å¯¼ä¸å¸®åŠ©
- [ ] æ–°æ‰‹å¼•å¯¼
- [ ] å·¥å…·æç¤º
- [ ] å¸®åŠ©æ–‡æ¡£
- [ ] ç¤ºä¾‹å’Œæ¨¡æ¿
- [ ] å¸¸è§é—®é¢˜è§£ç­”

---

## æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹å›é¡¾

1. **å…³æ³¨ç‚¹åˆ†ç¦»**ï¼šæ¡†æ¶è´Ÿè´£åŸºç¡€è®¾æ–½ï¼Œåº”ç”¨è´Ÿè´£ä¸šåŠ¡é€»è¾‘
2. **æ¨¡å—åŒ–è®¾è®¡**ï¼šåº”ç”¨åº”è¯¥èƒ½å¤Ÿä½œä¸ºç‹¬ç«‹æ¨¡å—é›†æˆ
3. **ç”¨æˆ·ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šåº”ç”¨éœ€è¦ç†è§£ç”¨æˆ·èº«ä»½ã€æƒé™å’Œé…é¢
4. **æ•°æ®æŒä¹…åŒ–**ï¼šé€šè¿‡æ ‡å‡†æ¥å£ä¿å­˜å’Œç®¡ç†æ•°æ®
5. **API å®‰å…¨**ï¼šåç«¯ä»£ç†ä¿æŠ¤æ•æ„Ÿä¿¡æ¯
6. **æ¸è¿›å¼é›†æˆ**ï¼šåˆ†é˜¶æ®µå®æ–½ï¼Œå¿«é€ŸéªŒè¯

### æˆåŠŸå…³é”®å› ç´ 

âœ… **æŠ€æœ¯å±‚é¢**ï¼š
- æ¸…æ™°çš„æ¶æ„è®¾è®¡
- æ ‡å‡†åŒ–çš„æ¥å£
- å®Œå–„çš„é”™è¯¯å¤„ç†
- æ€§èƒ½ä¼˜åŒ–

âœ… **äº§å“å±‚é¢**ï¼š
- æµç•…çš„ç”¨æˆ·ä½“éªŒ
- åˆç†çš„å®šä»·ç­–ç•¥
- æœ‰æ•ˆçš„é…é¢ç®¡ç†
- åŠæ—¶çš„ç”¨æˆ·åé¦ˆ

âœ… **è¿è¥å±‚é¢**ï¼š
- å®Œå–„çš„æ–‡æ¡£
- æŒç»­çš„ç›‘æ§
- å¿«é€Ÿçš„å“åº”
- æ•°æ®é©±åŠ¨çš„ä¼˜åŒ–

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³å¼€å§‹**ï¼šFork MkSaaS ä»“åº“ï¼Œæ­å»ºå¼€å‘ç¯å¢ƒ
2. **è®¾è®¡ä¼˜å…ˆ**ï¼šå®Œæˆæ•°æ®æ¨¡å‹å’Œ API è®¾è®¡
3. **å°æ­¥å¿«è·‘**ï¼šå…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå†é€æ­¥å®Œå–„
4. **æŒç»­æµ‹è¯•**ï¼šæ¯ä¸ªé˜¶æ®µéƒ½è¦å……åˆ†æµ‹è¯•
5. **æ”¶é›†åé¦ˆ**ï¼šå°½æ—©è®©ç”¨æˆ·è¯•ç”¨ï¼Œæ ¹æ®åé¦ˆè¿­ä»£

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-10-17  
**ä½œè€…**: Kiro AI Assistant

ç¥ä½ çš„ SaaS äº§å“å¼€å‘é¡ºåˆ©ï¼ğŸš€
